language: python
python:
  - "3.6"
  - "3.7"
  - "3.8"
services:
  - postgresql
install:
  - python setup.py install  # testing a non-pinned install, suitable for a library
  - pip install pytest
  - pip install .
before_script:
  - psql -c "CREATE USER tbtest WITH UNENCRYPTED PASSWORD 'tbtest';" -U postgres
  - psql -c "CREATE DATABASE tbtest WITH OWNER = tbtest;" -U postgres
script:
  - pytest
